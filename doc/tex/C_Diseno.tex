\apendice{Especificación de diseño}

\section{Introducción}
En el siguiente apartado se describen los detalles de la estructura del \textit{software}: el comportamiento y la interacción entre los distintos componentes.

\section{Diseño de datos}
Para implementar la persistencia de los datos se ha hecho uso de una base de datos SQLite debido a que no requiere instalación separada y es fácil de integrar con el framework de Flask. Este diseño se ha dividido en varias fases: diseño del diagrama entidad-relación, diseño del diagrama relacional y diseño del diccionario de datos.

\subsection{Modelo entidad-relación}

Para representar gráficamente las relaciones entre los datos, se ha creado un diagrama E-R (ver figura~\ref{fig:./img/DiagramaER.pdf}). En el se puede observar una ISA exclusiva total. Esto se debe a que, tras consultarlo con el profesor Jesús Maudes, se llegó a la conclusión de que crear una ISA exclusiva total era una solución válida debido a que se quiere evitar que un mismo usuario tenga acceso a varias funcionalidades. En caso de que esto se requiriese (si un doctor necesita permisos de administración) se crearía otra cuenta de forma más controlada.

\imagen{./img/DiagramaER.pdf}{Diagrama entidad-relación}

\subsection{Modelo relacional}

Partiendo del modelo entidad-relación (ver figura~\ref{fig:./img/DiagramaER.pdf}) se ha creado el diagrama relacional (ver figura~\ref{fig:./img/DiagramaRelacional.pdf}).
A continuación se mencionan algunas de las decisiones más importantes que se han decido tomar a la hora de crear este diagrama.
Con respecto a la ISA se ha decidido dividir en tres tablas distintas ya que en un principio un usuario solo va a poder tener uno de los tres roles asignados y en caso de que se necesitase que un doctor tuviera el rol de administrador, que es el un caso excepcional, se le otorgaría otra cuenta distinta con los permisos de administración. De esta manera podremos controlar los accesos de cada usuario de manera más limpia y exclusiva.
El rol de administrador es un rol que pese a que no se relacione con ninguna otra entidad, se ha visto que es necesario para poder permitir el acceso a los controles de administrador.




\imagen{./img/DiagramaRelacional.pdf}{Diagrama relacional de la aplicación}

\section{Diseño procedimental}

\section{Diseño arquitectónico}


